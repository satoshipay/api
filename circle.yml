machine:
  ruby:
    version: "2.4.1"

test:
  override:
    - "true"

deployment:
  production:
    branch: master
    commands:
      # Fix for: https://stackoverflow.com/questions/42225677/listen-error-unable-to-monitor-directories-for-changes
      - echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf && sudo sysctl -p
      - bundle exec middleman build --clean
      - /bin/bash publish.sh
