<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="provider-api">Provider API</h1>

<p>The Provider API is hosted by SatoshiPay. Providers talk to this API either directly or through plugins and libraries provided by SatoshiPay or third parties in order to register individual goods for monetisation. The provider itself hosts a complementary <a href="README_CONTENT_API.md">Content API</a>.</p>

<p>Note: In the context of monetisation of web page content <em>goods</em> are called <a href="README_CONTENT_ITEMS.md">Content Items</a>.</p>

<p>https://provider-api-testnet.satoshipay.io/v1/</p>

<h1 id="authentication">Authentication</h1>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Basic_access_authentication">Basic Authentication</a></li>
<li>Sign up at https://dashboard-testnet.satoshipay.io/ to receive API key and secret</li>
<li>Use API key as authentication username and API secret as password</li>
</ul>

<h1 id="format">Format</h1>

<h2 id="convention">Convention</h2>

<ul>
<li>Output: JSON</li>
<li>Input: JSON body</li>
<li>Make sure to send <code class="prettyprint">Content-Type: application/json</code> header when posting data</li>
</ul>
<pre class="highlight shell"><code>curl https://provider-api-testnet.satoshipay.io/v1/goods/558bcdbb1309c59725bdb559 <span class="se">\</span>
  -u user:password <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -d <span class="s1">'{"secret": "x"}'</span>
  -X PATCH
</code></pre>

<h1 id="goods">Goods</h1>

<h2 id="get-all-goods">Get all goods</h2>

<p>Get all goods for authenticated user.</p>
<pre class="highlight shell"><code>curl https://provider-api-testnet.satoshipay.io/v1/goods <span class="se">\</span>
  -u user:password
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56c5a2a4f1cc5c0448c429f2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"n1hLnMiJwAwB"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">9106</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tempora accusamus maxime similique veritatis magni."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.info"</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56c5a2a52362b70448a589b3"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"naKQdYiJbOug"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">1836</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Qui quod sint rem excepturi odio."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.name"</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56c5a2a52362b70448a589b4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m1btHMWJ6O6g"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">1349</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Saepe voluptatibus tempore pariatur atque quia corrupti nisi dolores."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.name"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.satoshipay.io/v1/goods</code></p>

<h2 id="get-one-good">Get one good</h2>

<p>Get a good.</p>
<pre class="highlight shell"><code>    curl https://api.satoshipay.io/v1/goods/558bcdbb1309c59725bdb559 <span class="se">\</span>
      -u user:password
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"558bcdbb1309c59725bdb559"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m1btHMWJ6O6g"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">1349</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Saepe voluptatibus tempore pariatur atque quia corrupti nisi dolores."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.name"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.satoshipay.io/v1/goods/&lt;ID&gt;</code></p>

<h2 id="post-a-good">Post a good</h2>

<p>Create a new good.</p>
<pre class="highlight shell"><code>    curl https://provider-api-testnet.satoshipay.io/v1/goods <span class="se">\</span>
      -u user:password <span class="se">\</span>
      -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
      -d <span class="s1">'{"secret":"DLDwYsQGromi","price":6247, \
      "title":"Nihil placeat sapiente ut eaque assumenda et reprehenderit quos ab.", \
       "src":"http://example.org/post1"}'</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56c5a5a722252b484dc4839f"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DLDwYsQGromi"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">6247</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nihil placeat sapiente ut eaque assumenda et reprehenderit quos ab."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.org/post1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://provider-api-testnet.satoshipay.io/v1/goods</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>Product price in satoshis</td>
<td>yes</td>
</tr>
<tr>
<td>secret</td>
<td>Secret information which the payment server will deliver to client after payment</td>
<td>yes</td>
</tr>
<tr>
<td>src</td>
<td>URL of page that contains the good</td>
<td>yes</td>
</tr>
<tr>
<td>title</td>
<td>Title of good</td>
<td>yes</td>
</tr>
</tbody></table>

<h2 id="patch-a-good">Patch a good</h2>

<p>Partially update a good, i.e. send only those properties that are to be updated.</p>
<pre class="highlight shell"><code>    curl https://provider-api-testnet.satoshipay.io/v1/goods/558bcdbb1309c59725bdb559 <span class="se">\</span>
      -u user:password <span class="se">\</span>
      -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
      -d <span class="s1">'{"src": "http://example.com/changed"}'</span> <span class="se">\</span>
      -X PATCH
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56c5a82328383fe54f841a60"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XyZtFohL7"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">1799</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Beatae ab autem delectus dolorem est fugiat."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/changed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://provider-api-testnet.satoshipay.io/v1/goods/558bcdbb1309c59725bdb559</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>Product price in satoshis</td>
<td>no</td>
</tr>
<tr>
<td>secret</td>
<td>Secret information which the payment server will deliver to client after payment</td>
<td>no</td>
</tr>
<tr>
<td>src</td>
<td>URL of page that contains the good</td>
<td>no</td>
</tr>
<tr>
<td>title</td>
<td>Title of good</td>
<td>no</td>
</tr>
</tbody></table>

<h3 id="put-goods-id"><em>PUT</em> goods/:id</h3>

<p>Replace a good, i.e. send a complete model.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><strong>price</strong> (required): Product price in satoshis</li>
<li><strong>secret</strong> (required): Secret information which the payment server will deliver to client after payment</li>
<li><strong>url</strong> (required): URL of page that contains the good</li>
<li><strong>title</strong> (required): Title of good</li>
</ul>
<pre class="highlight shell"><code>    curl https://provider-api-testnet.satoshipay.io/v1/goods/56c5a91265e80b7c51afad23 <span class="se">\</span>
      -u user:password <span class="se">\</span>
      -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
      -d <span class="s1">'{"secret":"RLC43wvCcmcs","price":4806,"title":"Veritatis impedit mollitia nam ipsum laudantium quam quidem.","src":"https://example.net"}'</span> <span class="se">\</span>
      -X PUT
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56c5a91265e80b7c51afad23"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RLC43wvCcmcs"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">4806</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Veritatis impedit mollitia nam ipsum laudantium quam quidem."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.net"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="delete-goods-id"><em>DELETE</em> goods/:id</h3>

<p>Delete a good.</p>

<ul>
<li>No arguments</li>
</ul>
<pre class="highlight shell"><code>    curl https://provider-api-testnet.satoshipay.io/v1/goods/558bcdbb1309c59725bdb559 <span class="se">\</span>
      -u user:password <span class="se">\</span>
      -X DELETE
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>

<ul>
<li>Empty response body</li>
</ul>

<h3 id="post-batch"><em>POST</em> batch</h3>

<p>Add a batch job of requests</p>

<ul>
<li><strong>requests</strong> (required): Array of requests of form:

<ul>
<li><strong>method</strong> (required): The method of the query. (POST, PUT, PATCH, DELETE)</li>
<li><strong>path</strong> (required): The path of the resource. (example: <code class="prettyprint">/goods/:id</code>)</li>
<li><strong>body</strong> (required): JSON formatted body.</li>
</ul></li>
</ul>
<pre class="highlight shell"><code>curl https://provider-api-testnet.satoshipay.io/v1/goods/558bcdbb1309c59725bdb559 <span class="se">\</span>
  -u user:password <span class="se">\</span>
  -d <span class="s1">'{"requests":[{"method":"POST","path":"/goods","body":{"secret":"NSKLDspUuo_V","price":1182,"title":"Aliquam sit nisi quia ut rerum.","src":"https://example.com/post1"}},{"method":"POST","path":"/goods","body":{"secret":"wh8tDxlUtkWR","title":"Id fugit atque fugiat eum.","src":"https://armand.info"}},{"method":"POST","path":"/goods","body":{"secret":"NSfg1elotk_R","price":7343,"title":"Vitae facere ea totam hic.","src":"https://example.com/post1"}}]}'</span>
  -X POST
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"responses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="nt">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56c59f4092d316b1419591eb"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NSKLDspUuo_V"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">1182</span><span class="p">,</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aliquam sit nisi quia ut rerum."</span><span class="p">,</span><span class="w">
        </span><span class="nt">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/post1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
      </span><span class="nt">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Malformed"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="nt">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56c59f4092d316b1419591ec"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NSfg1elotk_R"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">7343</span><span class="p">,</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vitae facere ea totam hic."</span><span class="p">,</span><span class="w">
        </span><span class="nt">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/post2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

          <h1 id="errors">Errors</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&rsquo;s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
